{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["'use strict';\n\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst input = document.querySelector('.choise #datetime-picker');\nconst button = document.querySelector('.choise button');\nconst day = document.querySelector('[data-days]');\nconst hour = document.querySelector('[data-hours]');\nconst minute = document.querySelector('[data-minutes]');\nconst second = document.querySelector('[data-seconds]');\n\nlet timerInterval;\nlet selectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (selectedDates.length === 0) {\n      return;\n    }\n\n    const dateNow = Date.now();\n    selectedDate = selectedDates[0];\n\n    let deltaDate = selectedDate - dateNow;\n    ifPossibleDate(deltaDate);\n  },\n};\n\nflatpickr(input, options);\n\nfunction updateTimerFace({ days, hours, minutes, seconds }) {\n  day.textContent = `${days}`;\n  hour.textContent = `${hours}`;\n  minute.textContent = `${minutes}`;\n  second.textContent = `${seconds}`;\n}\n\nfunction ifPossibleDate(delta) {\n  if (delta > 0) {\n    button.classList.add('active');\n    button.disabled = false;\n\n    button.addEventListener('click', handleStartTimer);\n    return;\n  }\n\n  button.classList.remove('active');\n  button.disabled = true;\n  iziToast.error({\n    message: 'Please choose a date in the future',\n    position: 'topCenter',\n  });\n  //window.alert('Please choose a date in the future');\n}\n\nfunction handleStartTimer() {\n  if (!button.classList.contains('active')) return;\n\n  startTimer(selectedDate);\n}\n\nfunction startTimer(date) {\n  button.classList.remove('active');\n  input.disabled = true;\n\n  clearInterval(timerInterval);\n\n  timerInterval = setInterval(() => {\n    let deltaDate = date - Date.now();\n\n    if (deltaDate <= 0) {\n      clearInterval(timerInterval);\n      updateTimerFace({\n        days: '00',\n        hours: '00',\n        minutes: '00',\n        seconds: '00',\n      });\n      console.log('Timer has finished!');\n      input.disabled = false;\n      return;\n    }\n\n    const left = convertMs(deltaDate);\n    updateTimerFace(left);\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = pad(Math.floor(ms / day));\n  const hours = pad(Math.floor((ms % day) / hour));\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["input","button","day","hour","minute","second","timerInterval","selectedDate","options","selectedDates","dateNow","deltaDate","ifPossibleDate","flatpickr","updateTimerFace","days","hours","minutes","seconds","delta","handleStartTimer","iziToast","startTimer","date","left","convertMs","ms","pad","value"],"mappings":"2FAOA,MAAMA,EAAQ,SAAS,cAAc,0BAA0B,EACzDC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAM,SAAS,cAAc,aAAa,EAC1CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,gBAAgB,EAChDC,EAAS,SAAS,cAAc,gBAAgB,EAEtD,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,SAAW,EAC3B,OAGF,MAAMC,EAAU,KAAK,MACrBH,EAAeE,EAAc,CAAC,EAE9B,IAAIE,EAAYJ,EAAeG,EAC/BE,EAAeD,CAAS,CACzB,CACH,EAEAE,EAAUb,EAAOQ,CAAO,EAExB,SAASM,EAAgB,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DhB,EAAI,YAAc,GAAGa,CAAI,GACzBZ,EAAK,YAAc,GAAGa,CAAK,GAC3BZ,EAAO,YAAc,GAAGa,CAAO,GAC/BZ,EAAO,YAAc,GAAGa,CAAO,EACjC,CAEA,SAASN,EAAeO,EAAO,CAC7B,GAAIA,EAAQ,EAAG,CACblB,EAAO,UAAU,IAAI,QAAQ,EAC7BA,EAAO,SAAW,GAElBA,EAAO,iBAAiB,QAASmB,CAAgB,EACjD,MACD,CAEDnB,EAAO,UAAU,OAAO,QAAQ,EAChCA,EAAO,SAAW,GAClBoB,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,WACd,CAAG,CAEH,CAEA,SAASD,GAAmB,CACrBnB,EAAO,UAAU,SAAS,QAAQ,GAEvCqB,EAAWf,CAAY,CACzB,CAEA,SAASe,EAAWC,EAAM,CACxBtB,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAM,SAAW,GAEjB,cAAcM,CAAa,EAE3BA,EAAgB,YAAY,IAAM,CAChC,IAAIK,EAAYY,EAAO,KAAK,IAAG,EAE/B,GAAIZ,GAAa,EAAG,CAClB,cAAcL,CAAa,EAC3BQ,EAAgB,CACd,KAAM,KACN,MAAO,KACP,QAAS,KACT,QAAS,IACjB,CAAO,EACD,QAAQ,IAAI,qBAAqB,EACjCd,EAAM,SAAW,GACjB,MACD,CAED,MAAMwB,EAAOC,EAAUd,CAAS,EAChCG,EAAgBU,CAAI,CACrB,EAAE,GAAI,CACT,CAEA,SAASC,EAAUC,EAAI,CAMrB,MAAMX,EAAOY,EAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC/BV,EAAQW,EAAI,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EACzCT,EAAUU,EAAI,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EACtDR,EAAUS,EAAI,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAX,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASS,EAAIC,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}